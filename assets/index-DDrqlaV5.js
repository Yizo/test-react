import{x as fe,y as Be,J as pe,z as xe,L as R,A as T,r as i,N as ee,O as he,g as O,P as ve,Q as Fe,u as Le,j as s,U as Q,S as Y,a as _e,B as W}from"./index-C6T66UYw.js";import{m as ce,A as Ae,a as De,b as de,c as ue}from"./const-BskLJner.js";import{C as L,T as ye}from"./index-MJq_1bjb.js";import{R as We}from"./WarningOutlined-YD5wTJCT.js";import{R as He}from"./SearchOutlined-BxpDuFxC.js";import{S as G}from"./index-gul_2otK.js";import{D as Me}from"./index-B-3zsT62.js";import{R as Ze}from"./PlusOutlined-DadAM9jt.js";import{F as Ve}from"./Table-rx-uFvO4.js";import{T as me}from"./index-BWL1JphO.js";import"./ClockCircleOutlined-CELcQ7Uv.js";import"./Pagination-B3rYXXPg.js";const ke=new R("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),Ue=new R("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),qe=new R("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),Xe=new R("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),Ke=new R("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),Je=new R("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),Qe=e=>{const{componentCls:t,iconCls:r,antCls:n,badgeShadowSize:o,textFontSize:m,textFontSizeSM:d,statusSize:v,dotSize:y,textFontWeight:x,indicatorHeight:b,indicatorHeightSM:u,marginXS:f,calc:h}=e,g=`${n}-scroll-number`,a=pe(e,(l,{darkColor:S})=>({[`&${t} ${t}-color-${l}`]:{background:S,[`&:not(${t}-count)`]:{color:S},"a:hover &":{background:S}}}));return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},xe(e)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${t}-count`]:{display:"inline-flex",justifyContent:"center",zIndex:e.indicatorZIndex,minWidth:b,height:b,color:e.badgeTextColor,fontWeight:x,fontSize:m,lineHeight:T(b),whiteSpace:"nowrap",textAlign:"center",background:e.badgeColor,borderRadius:h(b).div(2).equal(),boxShadow:`0 0 0 ${T(o)} ${e.badgeShadowColor}`,transition:`background ${e.motionDurationMid}`,a:{color:e.badgeTextColor},"a:hover":{color:e.badgeTextColor},"a:hover &":{background:e.badgeColorHover}},[`${t}-count-sm`]:{minWidth:u,height:u,fontSize:d,lineHeight:T(u),borderRadius:h(u).div(2).equal()},[`${t}-multiple-words`]:{padding:`0 ${T(e.paddingXS)}`,bdi:{unicodeBidi:"plaintext"}},[`${t}-dot`]:{zIndex:e.indicatorZIndex,width:y,minWidth:y,height:y,background:e.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${T(o)} ${e.badgeShadowColor}`},[`${t}-count, ${t}-dot, ${g}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${r}-spin`]:{animationName:Je,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${t}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${t}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:v,height:v,verticalAlign:"middle",borderRadius:"50%"},[`${t}-status-success`]:{backgroundColor:e.colorSuccess},[`${t}-status-processing`]:{overflow:"visible",color:e.colorInfo,backgroundColor:e.colorInfo,borderColor:"currentcolor","&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:o,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:ke,animationDuration:e.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${t}-status-default`]:{backgroundColor:e.colorTextPlaceholder},[`${t}-status-error`]:{backgroundColor:e.colorError},[`${t}-status-warning`]:{backgroundColor:e.colorWarning},[`${t}-status-text`]:{marginInlineStart:f,color:e.colorText,fontSize:e.fontSize}}}),a),{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:Ue,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`${t}-zoom-leave`]:{animationName:qe,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`&${t}-not-a-wrapper`]:{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:Xe,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`${t}-zoom-leave`]:{animationName:Ke,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`&:not(${t}-status)`]:{verticalAlign:"middle"},[`${g}-custom-component, ${t}-count`]:{transform:"none"},[`${g}-custom-component, ${g}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[g]:{overflow:"hidden",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack}`,[`${g}-only`]:{position:"relative",display:"inline-block",height:b,transition:`all ${e.motionDurationSlow} ${e.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${g}-only-unit`]:{height:b,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${g}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${t}-count, ${t}-dot, ${g}-custom-component`]:{transform:"translate(-50%, -50%)"}}})}},Ce=e=>{const{fontHeight:t,lineWidth:r,marginXS:n,colorBorderBg:o}=e,m=t,d=r,v=e.colorTextLightSolid,y=e.colorError,x=e.colorErrorHover;return Be(e,{badgeFontHeight:m,badgeShadowSize:d,badgeTextColor:v,badgeColor:y,badgeColorHover:x,badgeShadowColor:o,badgeProcessingDuration:"1.2s",badgeRibbonOffset:n,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"})},Se=e=>{const{fontSize:t,lineHeight:r,fontSizeSM:n,lineWidth:o}=e;return{indicatorZIndex:"auto",indicatorHeight:Math.round(t*r)-2*o,indicatorHeightSM:t,dotSize:n/2,textFontSize:n,textFontSizeSM:n,textFontWeight:"normal",statusSize:n/2}},Ye=fe("Badge",e=>{const t=Ce(e);return Qe(t)},Se),Ge=e=>{const{antCls:t,badgeFontHeight:r,marginXS:n,badgeRibbonOffset:o,calc:m}=e,d=`${t}-ribbon`,v=`${t}-ribbon-wrapper`,y=pe(e,(x,{darkColor:b})=>({[`&${d}-color-${x}`]:{background:b,color:b}}));return{[v]:{position:"relative"},[d]:Object.assign(Object.assign(Object.assign(Object.assign({},xe(e)),{position:"absolute",top:n,padding:`0 ${T(e.paddingXS)}`,color:e.colorPrimary,lineHeight:T(r),whiteSpace:"nowrap",backgroundColor:e.colorPrimary,borderRadius:e.borderRadiusSM,[`${d}-text`]:{color:e.badgeTextColor},[`${d}-corner`]:{position:"absolute",top:"100%",width:o,height:o,color:"currentcolor",border:`${T(m(o).div(2).equal())} solid`,transform:e.badgeRibbonCornerTransform,transformOrigin:"top",filter:e.badgeRibbonCornerFilter}}),y),{[`&${d}-placement-end`]:{insetInlineEnd:m(o).mul(-1).equal(),borderEndEndRadius:0,[`${d}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${d}-placement-start`]:{insetInlineStart:m(o).mul(-1).equal(),borderEndStartRadius:0,[`${d}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}},et=fe(["Badge","Ribbon"],e=>{const t=Ce(e);return Ge(t)},Se),tt=e=>{const{className:t,prefixCls:r,style:n,color:o,children:m,text:d,placement:v="end",rootClassName:y}=e,{getPrefixCls:x,direction:b}=i.useContext(ee),u=x("ribbon",r),f=`${u}-wrapper`,[h,g,a]=et(u,f),l=he(o,!1),S=O(u,`${u}-placement-${v}`,{[`${u}-rtl`]:b==="rtl",[`${u}-color-${o}`]:l},t),p={},j={};return o&&!l&&(p.background=o,j.color=o),h(i.createElement("div",{className:O(f,y,g,a)},m,i.createElement("div",{className:O(S,g),style:Object.assign(Object.assign({},p),n)},i.createElement("span",{className:`${u}-text`},d),i.createElement("div",{className:`${u}-corner`,style:j}))))},be=e=>{const{prefixCls:t,value:r,current:n,offset:o=0}=e;let m;return o&&(m={position:"absolute",top:`${o}00%`,left:0}),i.createElement("span",{style:m,className:O(`${t}-only-unit`,{current:n})},r)};function ot(e,t,r){let n=e,o=0;for(;(n+10)%10!==t;)n+=r,o+=r;return o}const st=e=>{const{prefixCls:t,count:r,value:n}=e,o=Number(n),m=Math.abs(r),[d,v]=i.useState(o),[y,x]=i.useState(m),b=()=>{v(o),x(m)};i.useEffect(()=>{const h=setTimeout(b,1e3);return()=>clearTimeout(h)},[o]);let u,f;if(d===o||Number.isNaN(o)||Number.isNaN(d))u=[i.createElement(be,Object.assign({},e,{key:o,current:!0}))],f={transition:"none"};else{u=[];const h=o+10,g=[];for(let p=o;p<=h;p+=1)g.push(p);const a=y<m?1:-1,l=g.findIndex(p=>p%10===d);u=(a<0?g.slice(0,l+1):g.slice(l)).map((p,j)=>{const z=p%10;return i.createElement(be,Object.assign({},e,{key:p,value:z,offset:a<0?j-l:j,current:j===l}))}),f={transform:`translateY(${-ot(d,o,a)}00%)`}}return i.createElement("span",{className:`${t}-only`,style:f,onTransitionEnd:b},u)};var nt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const at=i.forwardRef((e,t)=>{const{prefixCls:r,count:n,className:o,motionClassName:m,style:d,title:v,show:y,component:x="sup",children:b}=e,u=nt(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),{getPrefixCls:f}=i.useContext(ee),h=f("scroll-number",r),g=Object.assign(Object.assign({},u),{"data-show":y,style:d,className:O(h,o,m),title:v});let a=n;if(n&&Number(n)%1===0){const l=String(n).split("");a=i.createElement("bdi",null,l.map((S,p)=>i.createElement(st,{prefixCls:h,count:Number(n),value:S,key:l.length-p})))}return d!=null&&d.borderColor&&(g.style=Object.assign(Object.assign({},d),{boxShadow:`0 0 0 1px ${d.borderColor} inset`})),b?ve(b,l=>({className:O(`${h}-custom-component`,l==null?void 0:l.className,m)})):i.createElement(x,Object.assign({},g,{ref:t}),a)});var rt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};const it=i.forwardRef((e,t)=>{var r,n,o,m,d;const{prefixCls:v,scrollNumberPrefixCls:y,children:x,status:b,text:u,color:f,count:h=null,overflowCount:g=99,dot:a=!1,size:l="default",title:S,offset:p,style:j,className:z,rootClassName:$e,classNames:w,styles:$,showZero:M=!1}=e,te=rt(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","rootClassName","classNames","styles","showZero"]),{getPrefixCls:oe,direction:Z,badge:c}=i.useContext(ee),C=oe("badge",v),[se,Ne,we]=Ye(C),V=h>g?`${g}+`:h,B=V==="0"||V===0,ne=h===null||B&&!M,k=(b!=null||f!=null)&&ne,Oe=b!=null||!B,F=a&&!B,E=F?"":V,I=i.useMemo(()=>(E==null||E===""||B&&!M)&&!F,[E,B,M,F]),ae=i.useRef(h);I||(ae.current=h);const P=ae.current,re=i.useRef(E);I||(re.current=E);const U=re.current,ie=i.useRef(F);I||(ie.current=F);const _=i.useMemo(()=>{if(!p)return Object.assign(Object.assign({},c==null?void 0:c.style),j);const N={marginTop:p[1]};return Z==="rtl"?N.left=parseInt(p[0],10):N.right=-parseInt(p[0],10),Object.assign(Object.assign(Object.assign({},N),c==null?void 0:c.style),j)},[Z,p,j,c==null?void 0:c.style]),Te=S??(typeof P=="string"||typeof P=="number"?P:void 0),Ee=I||!u?null:i.createElement("span",{className:`${C}-status-text`},u),Ie=!P||typeof P!="object"?void 0:ve(P,N=>({style:Object.assign(Object.assign({},_),N.style)})),A=he(f,!1),Pe=O(w==null?void 0:w.indicator,(r=c==null?void 0:c.classNames)===null||r===void 0?void 0:r.indicator,{[`${C}-status-dot`]:k,[`${C}-status-${b}`]:!!b,[`${C}-color-${f}`]:A}),q={};f&&!A&&(q.color=f,q.background=f);const le=O(C,{[`${C}-status`]:k,[`${C}-not-a-wrapper`]:!x,[`${C}-rtl`]:Z==="rtl"},z,$e,c==null?void 0:c.className,(n=c==null?void 0:c.classNames)===null||n===void 0?void 0:n.root,w==null?void 0:w.root,Ne,we);if(!x&&k&&(u||Oe||!ne)){const N=_.color;return se(i.createElement("span",Object.assign({},te,{className:le,style:Object.assign(Object.assign(Object.assign({},$==null?void 0:$.root),(o=c==null?void 0:c.styles)===null||o===void 0?void 0:o.root),_)}),i.createElement("span",{className:Pe,style:Object.assign(Object.assign(Object.assign({},$==null?void 0:$.indicator),(m=c==null?void 0:c.styles)===null||m===void 0?void 0:m.indicator),q)}),u&&i.createElement("span",{style:{color:N},className:`${C}-status-text`},u)))}return se(i.createElement("span",Object.assign({ref:t},te,{className:le,style:Object.assign(Object.assign({},(d=c==null?void 0:c.styles)===null||d===void 0?void 0:d.root),$==null?void 0:$.root)}),x,i.createElement(Fe,{visible:!I,motionName:`${C}-zoom`,motionAppear:!1,motionDeadline:1e3},({className:N})=>{var X,K;const Re=oe("scroll-number",y),J=ie.current,ze=O(w==null?void 0:w.indicator,(X=c==null?void 0:c.classNames)===null||X===void 0?void 0:X.indicator,{[`${C}-dot`]:J,[`${C}-count`]:!J,[`${C}-count-sm`]:l==="small",[`${C}-multiple-words`]:!J&&U&&U.toString().length>1,[`${C}-status-${b}`]:!!b,[`${C}-color-${f}`]:A});let D=Object.assign(Object.assign(Object.assign({},$==null?void 0:$.indicator),(K=c==null?void 0:c.styles)===null||K===void 0?void 0:K.indicator),_);return f&&!A&&(D=D||{},D.background=f),i.createElement(at,{prefixCls:Re,show:!I,motionClassName:N,className:ze,count:U,title:Te,style:D,key:"scrollNumber"},Ie)}),Ee))}),je=it;je.Ribbon=tt;const{Option:ge}=G,{RangePicker:lt}=Me,{TabPane:H}=ye,Ct=()=>{const e=Le(),[t]=i.useState(!1),[r]=i.useState(ce),[n,o]=i.useState(ce),[m,d]=i.useState(""),[v,y]=i.useState(""),[x,b]=i.useState(""),[u,f]=i.useState("active");i.useEffect(()=>{let a=r.filter(l=>{const S=!m||l.name.toLowerCase().includes(m.toLowerCase())||l.app.toLowerCase().includes(m.toLowerCase())||l.description.toLowerCase().includes(m.toLowerCase()),p=!v||l.level===v,j=!x||l.status===x,z=u==="all"||l.status===u;return S&&p&&j&&z});o(a)},[r,m,v,x,u]);const h=[{title:"告警名称",dataIndex:"name",key:"name",render:(a,l)=>s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:a}),s.jsx("div",{className:"text-gray-500 text-sm",children:l.description})]})},{title:"级别",dataIndex:"level",key:"level",width:80,render:a=>s.jsx(me,{color:de[a].color,children:de[a].text})},{title:"状态",dataIndex:"status",key:"status",width:80,render:a=>s.jsx(me,{color:ue[a].color,children:ue[a].text})},{title:"应用",dataIndex:"app",key:"app",width:120},{title:"当前值/阈值",key:"value",width:140,render:(a,l)=>s.jsxs("div",{children:[s.jsxs("div",{className:"font-mono",children:[l.value," / ",l.threshold]}),s.jsx("div",{className:"text-gray-500 text-sm",children:l.metric})]})},{title:"持续时间",dataIndex:"duration",key:"duration",width:100},{title:"触发次数",dataIndex:"count",key:"count",width:80,render:a=>s.jsx(je,{count:a,color:"red"})},{title:"最后触发",dataIndex:"lastTriggered",key:"lastTriggered",width:160},{title:"操作",key:"action",width:120,render:(a,l)=>s.jsxs(Y,{size:"small",children:[s.jsx(W,{type:"text",size:"small",children:"查看"}),l.status==="active"&&s.jsx(W,{type:"text",size:"small",danger:!0,children:"抑制"})]})}],g=a=>a==="all"?r.length:r.filter(l=>l.status===a).length;return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"告警管理"}),s.jsx("p",{className:"text-gray-600",children:"管理和监控系统告警信息"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs(L,{className:"text-center",children:[s.jsx("div",{className:"text-red-500 text-2xl mb-2",children:s.jsx(Q,{})}),s.jsx("div",{className:"text-2xl font-bold text-red-500",children:r.filter(a=>a.status==="active").length}),s.jsx("div",{className:"text-gray-500",children:"活跃告警"})]}),s.jsxs(L,{className:"text-center",children:[s.jsx("div",{className:"text-orange-500 text-2xl mb-2",children:s.jsx(We,{})}),s.jsx("div",{className:"text-2xl font-bold text-orange-500",children:r.filter(a=>a.level==="critical").length}),s.jsx("div",{className:"text-gray-500",children:"严重告警"})]}),s.jsxs(L,{className:"text-center",children:[s.jsx("div",{className:"text-green-500 text-2xl mb-2",children:s.jsx(Q,{})}),s.jsx("div",{className:"text-2xl font-bold text-green-500",children:r.filter(a=>a.status==="resolved").length}),s.jsx("div",{className:"text-gray-500",children:"已解决"})]}),s.jsxs(L,{className:"text-center",children:[s.jsx("div",{className:"text-gray-500 text-2xl mb-2",children:s.jsx(Q,{})}),s.jsx("div",{className:"text-2xl font-bold",children:r.filter(a=>a.status==="suppressed").length}),s.jsx("div",{className:"text-gray-500",children:"已抑制"})]})]}),s.jsxs(L,{children:[s.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[s.jsxs(Y,{children:[s.jsx(_e,{placeholder:"搜索告警名称、应用或描述",prefix:s.jsx(He,{}),value:m,onChange:a=>d(a.target.value),style:{width:300}}),s.jsx(G,{placeholder:"告警级别",style:{width:120},value:v,onChange:y,allowClear:!0,children:Ae.map(a=>s.jsx(ge,{value:a.value,children:a.label},a.value))}),s.jsx(G,{placeholder:"告警状态",style:{width:120},value:x,onChange:b,allowClear:!0,children:De.map(a=>s.jsx(ge,{value:a.value,children:a.label},a.value))}),s.jsx(lt,{})]}),s.jsxs(Y,{children:[s.jsx(W,{type:"primary",icon:s.jsx(Ze,{}),onClick:()=>e("/alerts/rules"),children:"创建规则"}),s.jsx(W,{onClick:()=>e("/alerts/history"),children:"告警历史"})]})]}),s.jsxs(ye,{activeKey:u,onChange:f,children:[s.jsx(H,{tab:`全部 (${g("all")})`},"all"),s.jsx(H,{tab:`活跃 (${g("active")})`},"active"),s.jsx(H,{tab:`已解决 (${g("resolved")})`},"resolved"),s.jsx(H,{tab:`已抑制 (${g("suppressed")})`},"suppressed")]}),s.jsx(Ve,{columns:h,dataSource:n,rowKey:"id",loading:t,pagination:{total:n.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:a=>`共 ${a} 条`}})]})]})};export{Ct as default};
