import{r as m,az as Ke,e as Ie,E as p,g as ae,K as A,_ as Ae,i as B,p as xe,h as ge,ae as We,x as Xe,y as Ge,z as Je,A as Ue,N as Qe,H as qe,T as Ye,F as P,j as a,aL as Ze,R as ea,C as Y,a as Re,M as W,a4 as pe,B as E,S as aa,b as ta,s as Z}from"./index-C6T66UYw.js";import{T as la}from"./index-BQa7M3I9.js";import{C as be}from"./index-MJq_1bjb.js";import{S as ee}from"./index-gul_2otK.js";import{F as na}from"./Table-rx-uFvO4.js";import{D as V}from"./index-Dekj6dpf.js";import{T as K}from"./index-BWL1JphO.js";import{S as ye}from"./index-D3Omcvxu.js";import{R as sa}from"./InfoCircleOutlined-B2IX5QdB.js";import{R as ra}from"./DownloadOutlined-FaP9qsLC.js";import{R as oa}from"./DeleteOutlined-CETmvlP7.js";import"./EditOutlined-DdmGLkPL.js";import"./Pagination-B3rYXXPg.js";import"./DownloadOutlined-DTidZHln.js";import"./DeleteOutlined-DFutYCzo.js";var ia={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},ca=function(n,o){return m.createElement(Ke,Ie({},n,{ref:o,icon:ia}))},da=m.forwardRef(ca);function ua(e,n){var o=e.disabled,l=e.prefixCls,i=e.character,b=e.characterRender,d=e.index,$=e.count,u=e.value,T=e.allowHalf,s=e.focused,k=e.onHover,H=e.onClick,v=function(g){k(g,d)},F=function(g){H(g,d)},w=function(g){g.keyCode===A.ENTER&&H(g,d)},y=d+1,h=new Set([l]);u===0&&d===0&&s?h.add("".concat(l,"-focused")):T&&u+.5>=y&&u<y?(h.add("".concat(l,"-half")),h.add("".concat(l,"-active")),s&&h.add("".concat(l,"-focused"))):(y<=u?h.add("".concat(l,"-full")):h.add("".concat(l,"-zero")),y===u&&s&&h.add("".concat(l,"-focused")));var f=typeof i=="function"?i(e):i,I=p.createElement("li",{className:ae(Array.from(h)),ref:n},p.createElement("div",{onClick:o?null:F,onKeyDown:o?null:w,onMouseMove:o?null:v,role:"radio","aria-checked":u>d?"true":"false","aria-posinset":d+1,"aria-setsize":$,tabIndex:o?-1:0},p.createElement("div",{className:"".concat(l,"-first")},f),p.createElement("div",{className:"".concat(l,"-second")},f)));return b&&(I=b(I,e)),I}const fa=p.forwardRef(ua);function ma(){var e=m.useRef({});function n(l){return e.current[l]}function o(l){return function(i){e.current[l]=i}}return[n,o]}function ha(e){var n=e.pageXOffset,o="scrollLeft";if(typeof n!="number"){var l=e.document;n=l.documentElement[o],typeof n!="number"&&(n=l.body[o])}return n}function va(e){var n,o,l=e.ownerDocument,i=l.body,b=l&&l.documentElement,d=e.getBoundingClientRect();return n=d.left,o=d.top,n-=b.clientLeft||i.clientLeft||0,o-=b.clientTop||i.clientTop||0,{left:n,top:o}}function xa(e){var n=va(e),o=e.ownerDocument,l=o.defaultView||o.parentWindow;return n.left+=ha(l),n.left}var ga=["prefixCls","className","defaultValue","value","count","allowHalf","allowClear","keyboard","character","characterRender","disabled","direction","tabIndex","autoFocus","onHoverChange","onChange","onFocus","onBlur","onKeyDown","onMouseLeave"];function pa(e,n){var o=e.prefixCls,l=o===void 0?"rc-rate":o,i=e.className,b=e.defaultValue,d=e.value,$=e.count,u=$===void 0?5:$,T=e.allowHalf,s=T===void 0?!1:T,k=e.allowClear,H=k===void 0?!0:k,v=e.keyboard,F=v===void 0?!0:v,w=e.character,y=w===void 0?"★":w,h=e.characterRender,f=e.disabled,I=e.direction,R=I===void 0?"ltr":I,g=e.tabIndex,_=g===void 0?0:g,G=e.autoFocus,D=e.onHoverChange,z=e.onChange,O=e.onFocus,t=e.onBlur,c=e.onKeyDown,M=e.onMouseLeave,J=Ae(e,ga),U=ma(),te=B(U,2),Ne=te[0],ke=te[1],Q=p.useRef(null),le=function(){if(!f){var r;(r=Q.current)===null||r===void 0||r.focus()}};p.useImperativeHandle(n,function(){return{focus:le,blur:function(){if(!f){var r;(r=Q.current)===null||r===void 0||r.blur()}}}});var $e=xe(b||0,{value:d}),ne=B($e,2),N=ne[0],Te=ne[1],He=xe(null),se=B(He,2),Fe=se[0],q=se[1],re=function(r,S){var x=R==="rtl",C=r+1;if(s){var me=Ne(r),he=xa(me),ve=me.clientWidth;(x&&S-he>ve/2||!x&&S-he<ve/2)&&(C-=.5)}return C},L=function(r){Te(r),z==null||z(r)},De=p.useState(!1),oe=B(De,2),Ve=oe[0],ie=oe[1],Me=function(){ie(!0),O==null||O()},ze=function(){ie(!1),t==null||t()},Oe=p.useState(null),ce=B(Oe,2),de=ce[0],ue=ce[1],Ee=function(r,S){var x=re(S,r.pageX);x!==Fe&&(ue(x),q(null)),D==null||D(x)},fe=function(r){f||(ue(null),q(null),D==null||D(void 0)),r&&(M==null||M(r))},_e=function(r,S){var x=re(S,r.pageX),C=!1;H&&(C=x===N),fe(),L(C?0:x),q(C?x:null)},Le=function(r){var S=r.keyCode,x=R==="rtl",C=s?.5:1;F&&(S===A.RIGHT&&N<u&&!x?(L(N+C),r.preventDefault()):S===A.LEFT&&N>0&&!x||S===A.RIGHT&&N>0&&x?(L(N-C),r.preventDefault()):S===A.LEFT&&N<u&&x&&(L(N+C),r.preventDefault())),c==null||c(r)};p.useEffect(function(){G&&!f&&le()},[]);var Be=new Array(u).fill(0).map(function(j,r){return p.createElement(fa,{ref:ke(r),index:r,count:u,disabled:f,prefixCls:"".concat(l,"-star"),allowHalf:s,value:de===null?N:de,onClick:_e,onHover:Ee,key:j||r,character:y,characterRender:h,focused:Ve})}),Pe=ae(l,i,ge(ge({},"".concat(l,"-disabled"),f),"".concat(l,"-rtl"),R==="rtl"));return p.createElement("ul",Ie({className:Pe,onMouseLeave:fe,tabIndex:f?-1:_,onFocus:f?null:Me,onBlur:f?null:ze,onKeyDown:f?null:Le,ref:Q},We(J,{aria:!0,data:!0,attr:!0})),Be)}const ba=p.forwardRef(pa),ya=e=>{const{componentCls:n}=e;return{[`${n}-star`]:{position:"relative",display:"inline-block",color:"inherit",cursor:"pointer","&:not(:last-child)":{marginInlineEnd:e.marginXS},"> div":{transition:`all ${e.motionDurationMid}, outline 0s`,"&:hover":{transform:e.starHoverScale},"&:focus":{outline:0},"&:focus-visible":{outline:`${Ue(e.lineWidth)} dashed ${e.starColor}`,transform:e.starHoverScale}},"&-first, &-second":{color:e.starBg,transition:`all ${e.motionDurationMid}`,userSelect:"none"},"&-first":{position:"absolute",top:0,insetInlineStart:0,width:"50%",height:"100%",overflow:"hidden",opacity:0},[`&-half ${n}-star-first, &-half ${n}-star-second`]:{opacity:1},[`&-half ${n}-star-first, &-full ${n}-star-second`]:{color:"inherit"}}}},Ca=e=>({[`&-rtl${e.componentCls}`]:{direction:"rtl"}}),ja=e=>{const{componentCls:n}=e;return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},Je(e)),{display:"inline-block",margin:0,padding:0,color:e.starColor,fontSize:e.starSize,lineHeight:1,listStyle:"none",outline:"none",[`&-disabled${n} ${n}-star`]:{cursor:"default","> div:hover":{transform:"scale(1)"}}}),ya(e)),Ca(e))}},Sa=e=>({starColor:e.yellow6,starSize:e.controlHeightLG*.5,starHoverScale:"scale(1.1)",starBg:e.colorFillContent}),wa=Xe("Rate",e=>{const n=Ge(e,{});return[ja(n)]},Sa);var Ia=function(e,n){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(o[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,l=Object.getOwnPropertySymbols(e);i<l.length;i++)n.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(o[l[i]]=e[l[i]]);return o};const Ce=m.forwardRef((e,n)=>{const{prefixCls:o,className:l,rootClassName:i,style:b,tooltips:d,character:$=m.createElement(da,null),disabled:u}=e,T=Ia(e,["prefixCls","className","rootClassName","style","tooltips","character","disabled"]),s=(g,{index:_})=>d?m.createElement(Ye,{title:d[_]},g):g,{getPrefixCls:k,direction:H,rate:v}=m.useContext(Qe),F=k("rate",o),[w,y,h]=wa(F),f=Object.assign(Object.assign({},v==null?void 0:v.style),b),I=m.useContext(qe),R=u??I;return w(m.createElement(ba,Object.assign({ref:n,character:$,characterRender:s,disabled:R},T,{className:ae(l,i,y,h,v==null?void 0:v.className),style:f,prefixCls:F,direction:H})))}),{Search:Ra}=Re,{Option:X}=ee,{Text:je,Title:Se,Paragraph:we}=la,Pa=()=>{var O;const[e,n]=m.useState([]),[o,l]=m.useState(!1),[i,b]=m.useState(""),[d,$]=m.useState(""),[u,T]=m.useState(""),[s,k]=m.useState(null),[H,v]=m.useState(!1),[F,w]=m.useState(!1),[y]=P.useForm();m.useEffect(()=>{n([{id:"1",name:"错误上报增强",description:"增强版错误上报插件，支持错误堆栈分析和自动分类",version:"2.1.0",author:"监控团队",category:"monitoring",status:"installed",rating:4.8,downloads:2580,icon:"🔍",tags:["错误监控","堆栈分析"],installTime:"2024-01-15 10:30:00",size:"2.3 MB",homepage:"https://example.com/error-plugin",repository:"https://github.com/example/error-plugin"},{id:"2",name:"性能分析工具",description:"深度性能分析插件，提供详细的性能指标和优化建议",version:"1.5.2",author:"性能优化团队",category:"performance",status:"installed",rating:4.6,downloads:1920,icon:"⚡",tags:["性能监控","优化建议"],installTime:"2024-01-10 14:20:00",size:"3.1 MB",homepage:"https://example.com/perf-plugin"},{id:"3",name:"用户行为分析",description:"用户行为轨迹分析插件，支持热力图和用户路径分析",version:"3.2.1",author:"用户体验团队",category:"analytics",status:"available",rating:4.9,downloads:3420,icon:"👥",tags:["用户行为","热力图","路径分析"],size:"4.2 MB",homepage:"https://example.com/behavior-plugin"},{id:"4",name:"多渠道告警",description:"支持微信、钉钉、飞书等多渠道告警通知",version:"1.8.0",author:"通知服务团队",category:"notification",status:"available",rating:4.5,downloads:1650,icon:"📢",tags:["告警通知","多渠道"],size:"1.8 MB",homepage:"https://example.com/notification-plugin"},{id:"5",name:"自定义Dashboard",description:"可视化Dashboard定制插件，支持拖拽式图表配置",version:"2.0.3",author:"可视化团队",category:"dashboard",status:"updating",rating:4.7,downloads:890,icon:"📊",tags:["可视化","自定义"],installTime:"2024-01-08 09:15:00",size:"5.6 MB",homepage:"https://example.com/dashboard-plugin"}])},[]);const h=[{value:"monitoring",label:"监控类"},{value:"performance",label:"性能类"},{value:"analytics",label:"分析类"},{value:"notification",label:"通知类"},{value:"dashboard",label:"可视化类"},{value:"security",label:"安全类"}],f={installed:{text:"已安装",color:"green"},available:{text:"可安装",color:"blue"},updating:{text:"更新中",color:"orange"}},I=[{title:"插件信息",key:"info",width:300,render:t=>a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(pe,{size:48,className:"bg-blue-500 text-white text-xl",children:t.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900",children:t.name}),a.jsx("div",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:t.description}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[a.jsx(Ce,{disabled:!0,defaultValue:t.rating}),a.jsxs(je,{type:"secondary",className:"text-xs",children:[t.rating," (",t.downloads," 下载)"]})]})]})]})},{title:"版本",dataIndex:"version",key:"version",width:100,render:t=>a.jsx(K,{color:"blue",children:t})},{title:"分类",dataIndex:"category",key:"category",width:100,render:t=>{const c=h.find(M=>M.value===t);return a.jsx(K,{children:(c==null?void 0:c.label)||t})}},{title:"标签",dataIndex:"tags",key:"tags",width:200,render:t=>a.jsx("div",{className:"flex flex-wrap gap-1",children:t.map(c=>a.jsx(K,{color:"purple",children:c},c))})},{title:"状态",dataIndex:"status",key:"status",width:100,render:t=>a.jsx(K,{color:f[t].color,children:f[t].text})},{title:"操作",key:"action",width:200,render:t=>a.jsxs(aa,{size:"small",children:[a.jsx(E,{size:"small",icon:a.jsx(sa,{}),onClick:()=>R(t),children:"详情"}),t.status==="available"&&a.jsx(E,{size:"small",type:"primary",icon:a.jsx(ra,{}),onClick:()=>g(t),children:"安装"}),t.status==="installed"&&a.jsxs(a.Fragment,{children:[a.jsx(E,{size:"small",icon:a.jsx(ta,{}),onClick:()=>G(t),children:"配置"}),a.jsx(E,{size:"small",danger:!0,icon:a.jsx(oa,{}),onClick:()=>_(t),children:"卸载"})]}),t.status==="updating"&&a.jsx(E,{size:"small",loading:!0,children:"更新中"})]})}],R=t=>{k(t),v(!0)},g=t=>{W.confirm({title:"安装插件",content:`确定要安装插件 "${t.name}" 吗？`,onOk:()=>{l(!0),setTimeout(()=>{n(e.map(c=>c.id===t.id?{...c,status:"installed",installTime:new Date().toLocaleString()}:c)),l(!1),Z.success("插件安装成功")},2e3)}})},_=t=>{W.confirm({title:"卸载插件",content:`确定要卸载插件 "${t.name}" 吗？卸载后配置将被清除。`,onOk:()=>{n(e.map(c=>c.id===t.id?{...c,status:"available",installTime:void 0}:c)),Z.success("插件卸载成功")}})},G=t=>{k(t),y.resetFields(),w(!0)},D=()=>{y.validateFields().then(()=>{Z.success("插件配置已保存"),w(!1)})},z=e.filter(t=>{const c=t.name.includes(i)||t.description.includes(i)||t.tags.some(U=>U.includes(i)),M=!d||t.category===d,J=!u||t.status===u;return c&&M&&J});return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs(Se,{level:2,className:"flex items-center gap-2",children:[a.jsx(Ze,{}),"插件市场"]}),a.jsx(we,{type:"secondary",children:"扩展监控功能，安装和管理各种插件"})]}),a.jsx(be,{className:"mb-6",children:a.jsxs(ea,{gutter:[16,16],align:"middle",children:[a.jsx(Y,{xs:24,sm:8,children:a.jsx(Ra,{placeholder:"搜索插件名称、描述、标签",allowClear:!0,onSearch:b,onChange:t=>b(t.target.value)})}),a.jsx(Y,{xs:12,sm:4,children:a.jsx(ee,{placeholder:"分类",allowClear:!0,style:{width:"100%"},onChange:$,children:h.map(t=>a.jsx(X,{value:t.value,children:t.label},t.value))})}),a.jsx(Y,{xs:12,sm:4,children:a.jsxs(ee,{placeholder:"状态",allowClear:!0,style:{width:"100%"},onChange:T,children:[a.jsx(X,{value:"installed",children:"已安装"}),a.jsx(X,{value:"available",children:"可安装"}),a.jsx(X,{value:"updating",children:"更新中"})]})})]})}),a.jsx(be,{children:a.jsx(na,{columns:I,dataSource:z,rowKey:"id",loading:o,pagination:{total:z.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:t=>`共 ${t} 个插件`}})}),a.jsx(W,{title:`插件详情 - ${s==null?void 0:s.name}`,open:H,onCancel:()=>v(!1),footer:[a.jsx(E,{onClick:()=>v(!1),children:"关闭"},"close")],width:800,children:s&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx(pe,{size:64,className:"bg-blue-500 text-white text-2xl",children:s.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx(Se,{level:4,className:"mb-2",children:s.name}),a.jsx(we,{children:s.description}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Ce,{disabled:!0,defaultValue:s.rating}),a.jsxs(je,{type:"secondary",children:[s.rating," 分 · ",s.downloads," ","次下载"]})]})]})]}),a.jsxs(V,{column:2,bordered:!0,children:[a.jsx(V.Item,{label:"版本",children:s.version}),a.jsx(V.Item,{label:"作者",children:s.author}),a.jsx(V.Item,{label:"分类",children:(O=h.find(t=>t.value===s.category))==null?void 0:O.label}),a.jsx(V.Item,{label:"大小",children:s.size}),s.installTime&&a.jsx(V.Item,{label:"安装时间",span:2,children:s.installTime}),s.homepage&&a.jsx(V.Item,{label:"主页",span:2,children:a.jsx("a",{href:s.homepage,target:"_blank",rel:"noopener noreferrer",children:s.homepage})}),a.jsx(V.Item,{label:"标签",span:2,children:s.tags.map(t=>a.jsx(K,{color:"purple",className:"mb-1",children:t},t))})]})]})}),a.jsx(W,{title:`配置插件 - ${s==null?void 0:s.name}`,open:F,onOk:D,onCancel:()=>w(!1),width:600,children:a.jsxs(P,{form:y,layout:"vertical",children:[a.jsx(P.Item,{name:"enabled",label:"启用状态",valuePropName:"checked",children:a.jsx(ye,{checkedChildren:"启用",unCheckedChildren:"禁用",defaultChecked:!0})}),a.jsx(P.Item,{name:"config",label:"配置参数",children:a.jsx(Re.TextArea,{rows:6,placeholder:"请输入JSON格式的配置参数",defaultValue:JSON.stringify({apiUrl:"https://api.example.com",timeout:5e3,retryTimes:3},null,2)})}),a.jsx(P.Item,{name:"autoUpdate",label:"自动更新",valuePropName:"checked",children:a.jsx(ye,{checkedChildren:"开启",unCheckedChildren:"关闭"})})]})})]})};export{Pa as default};
