import{r as i,I as D,F as o,j as e,S as x,a as f,B as p,M as g,s as m,a4 as H,a5 as K}from"./index-C6T66UYw.js";import{C as N}from"./index-MJq_1bjb.js";import{S as c}from"./index-gul_2otK.js";import{R as U}from"./PlusOutlined-DadAM9jt.js";import{F as J}from"./Table-rx-uFvO4.js";import{T as j}from"./index-BWL1JphO.js";import{R as Q}from"./EditOutlined-9U3olPbu.js";import{R as W}from"./DeleteOutlined-CETmvlP7.js";import"./Pagination-B3rYXXPg.js";import"./EditOutlined-DdmGLkPL.js";import"./DeleteOutlined-DFutYCzo.js";var G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"};function w(){return w=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var d=arguments[n];for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&(s[r]=d[r])}return s},w.apply(this,arguments)}const X=(s,n)=>i.createElement(D,w({},s,{ref:n,icon:G})),Y=i.forwardRef(X),Z=[{id:"1",name:"张三",email:"zhangsan@example.com",role:"admin",status:"active",apps:["app_web_001","app_mobile_002"],groups:["官网项目","移动项目"],joinTime:"2024-01-15 10:30:00",lastLogin:"2024-01-20 14:20:00"},{id:"2",name:"李四",email:"lisi@example.com",role:"developer",status:"active",apps:["app_mobile_002"],groups:["移动项目"],joinTime:"2024-01-10 09:00:00",lastLogin:"2024-01-19 16:45:00"},{id:"3",name:"王五",email:"wangwu@example.com",role:"viewer",status:"inactive",apps:["app_web_001"],groups:["官网项目"],joinTime:"2024-01-08 14:20:00",lastLogin:"2024-01-12 10:15:00"}],T={admin:{text:"管理员",color:"red"},developer:{text:"开发者",color:"blue"},viewer:{text:"查看者",color:"green"}},ee=[{value:"admin",label:"管理员"},{value:"developer",label:"开发者"},{value:"viewer",label:"查看者"}],O={active:{text:"正常",color:"green"},inactive:{text:"禁用",color:"red"}},te=[{value:"active",label:"正常"},{value:"inactive",label:"禁用"}],{Search:le}=f,{Option:a}=c,xe=()=>{const[s,n]=i.useState(Z),[d]=i.useState(!1),[r,b]=i.useState([]),[S,M]=i.useState(""),[y,k]=i.useState(""),[I,C]=i.useState(""),[E,h]=i.useState(!1),[v,R]=i.useState(null),[u]=o.useForm(),B=[{title:"成员信息",key:"member",render:t=>e.jsxs(x,{children:[e.jsx(H,{src:t.avatar,icon:e.jsx(K,{})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:t.name}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[e.jsx(Y,{})," ",t.email]})]})]})},{title:"角色",dataIndex:"role",key:"role",render:t=>e.jsx(j,{color:T[t].color,children:T[t].text})},{title:"关联应用",dataIndex:"apps",key:"apps",render:t=>e.jsxs("div",{children:[t.map(l=>e.jsx(j,{color:"blue",style:{marginBottom:4},children:l},l)),t.length===0&&e.jsx("span",{style:{color:"#ccc"},children:"无"})]})},{title:"所属分组",dataIndex:"groups",key:"groups",render:t=>e.jsx("div",{children:t.map(l=>e.jsx(j,{color:"green",children:l},l))})},{title:"状态",dataIndex:"status",key:"status",render:t=>e.jsx(j,{color:O[t].color,children:O[t].text})},{title:"加入时间",dataIndex:"joinTime",key:"joinTime",width:180},{title:"最后登录",dataIndex:"lastLogin",key:"lastLogin",width:180},{title:"操作",key:"action",width:150,render:t=>e.jsxs(x,{size:"small",children:[e.jsx(p,{size:"small",icon:e.jsx(Q,{}),onClick:()=>z(t),children:"编辑"}),e.jsx(p,{size:"small",danger:!0,icon:e.jsx(W,{}),onClick:()=>F(t.id),children:"移除"})]})}],L=()=>{R(null),u.resetFields(),h(!0)},z=t=>{R(t),u.setFieldsValue(t),h(!0)},F=t=>{g.confirm({title:"移除成员",content:"确定要移除这个成员吗？",onOk:()=>{n(s.filter(l=>l.id!==t)),m.success("移除成功")}})},V=()=>{if(r.length===0){m.warning("请选择要移除的成员");return}g.confirm({title:"批量移除",content:`确定移除选中的 ${r.length} 个成员吗？`,onOk:()=>{n(s.filter(t=>!r.includes(t.id))),b([]),m.success("批量移除成功")}})},$=()=>{u.validateFields().then(t=>{if(v)n(s.map(l=>l.id===v.id?{...l,...t}:l)),m.success("编辑成功");else{const l={id:Date.now().toString(),...t,joinTime:new Date().toLocaleString(),lastLogin:"-"};n([...s,l]),m.success("邀请成功")}h(!1)})},_=s.filter(t=>{const l=t.name.includes(S)||t.email.includes(S),A=!y||t.role===y,q=!I||t.status===I;return l&&A&&q}),P={selectedRowKeys:r,onChange:t=>{b(t)}};return e.jsxs(N,{children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs(x,{style:{marginBottom:16},children:[e.jsx(le,{placeholder:"搜索成员姓名、邮箱",allowClear:!0,style:{width:300},onSearch:M,onChange:t=>M(t.target.value)}),e.jsx(c,{placeholder:"选择角色",allowClear:!0,style:{width:120},onChange:k,children:ee.map(t=>e.jsx(a,{value:t.value,children:t.label},t.value))}),e.jsx(c,{placeholder:"选择状态",allowClear:!0,style:{width:120},onChange:C,children:te.map(t=>e.jsx(a,{value:t.value,children:t.label},t.value))})]}),e.jsx("div",{children:e.jsxs(x,{children:[e.jsx(p,{type:"primary",icon:e.jsx(U,{}),onClick:L,children:"邀请成员"}),e.jsx(p,{danger:!0,onClick:V,children:"批量移除"})]})})]}),e.jsx(J,{rowSelection:P,columns:B,dataSource:_,rowKey:"id",loading:d,pagination:{total:_.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:t=>`共 ${t} 条记录`}}),e.jsx(g,{title:v?"编辑成员":"邀请成员",open:E,onOk:$,onCancel:()=>h(!1),width:600,children:e.jsxs(o,{form:u,layout:"vertical",children:[e.jsx(o.Item,{name:"name",label:"姓名",rules:[{required:!0,message:"请输入姓名"}],children:e.jsx(f,{placeholder:"请输入成员姓名"})}),e.jsx(o.Item,{name:"email",label:"邮箱",rules:[{required:!0,message:"请输入邮箱"},{type:"email",message:"请输入有效的邮箱地址"}],children:e.jsx(f,{placeholder:"请输入邮箱地址"})}),e.jsx(o.Item,{name:"role",label:"角色",rules:[{required:!0,message:"请选择角色"}],children:e.jsxs(c,{placeholder:"请选择角色",children:[e.jsx(a,{value:"admin",children:"管理员"}),e.jsx(a,{value:"developer",children:"开发者"}),e.jsx(a,{value:"operator",children:"运维"}),e.jsx(a,{value:"viewer",children:"只读"})]})}),e.jsx(o.Item,{name:"apps",label:"关联应用",children:e.jsxs(c,{mode:"multiple",placeholder:"请选择关联的应用",children:[e.jsx(a,{value:"app_web_001",children:"官网前端"}),e.jsx(a,{value:"app_mobile_002",children:"移动端H5"})]})}),e.jsx(o.Item,{name:"groups",label:"所属分组",children:e.jsxs(c,{mode:"multiple",placeholder:"请选择所属分组",children:[e.jsx(a,{value:"官网项目",children:"官网项目"}),e.jsx(a,{value:"移动项目",children:"移动项目"})]})}),e.jsx(o.Item,{name:"status",label:"状态",initialValue:"active",children:e.jsxs(c,{children:[e.jsx(a,{value:"active",children:"活跃"}),e.jsx(a,{value:"inactive",children:"禁用"})]})})]})})]})};export{xe as default};
