import{r as u,I as q,a7 as C,j as e,R as g,C as i,S as x,B as w,a8 as X,s as V}from"./index-C6T66UYw.js";import{T as Z}from"./index-BQa7M3I9.js";import{C as o,T as F}from"./index-MJq_1bjb.js";import{S as E}from"./index-gul_2otK.js";import{D as ee}from"./index-B-3zsT62.js";import{R as se}from"./ReloadOutlined-DY0v2jjP.js";import{R as te}from"./DownloadOutlined-FaP9qsLC.js";import{D as ae}from"./index-S__NQiOU.js";import{C as T,R as I,F as le}from"./Table-rx-uFvO4.js";import{S as f}from"./index-DpoEN-Oe.js";import{T as re}from"./index-BWL1JphO.js";import"./EditOutlined-DdmGLkPL.js";import"./ClockCircleOutlined-CELcQ7Uv.js";import"./DownloadOutlined-DTidZHln.js";import"./Pagination-B3rYXXPg.js";var ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};function P(){return P=Object.assign?Object.assign.bind():function(m){for(var d=1;d<arguments.length;d++){var n=arguments[d];for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&(m[p]=n[p])}return m},P.apply(this,arguments)}const ne=(m,d)=>u.createElement(q,P({},m,{ref:d,icon:ie})),ce=u.forwardRef(ne),b=[{value:"app1",label:"ÁîµÂïÜÂâçÂè∞"},{value:"app2",label:"ÁÆ°ÁêÜÂêéÂè∞"},{value:"app3",label:"ÁßªÂä®Á´Ø"},{value:"app4",label:"Â∞èÁ®ãÂ∫è"}],O=[{value:"beijing",label:"Âåó‰∫¨"},{value:"shanghai",label:"‰∏äÊµ∑"},{value:"guangzhou",label:"ÂπøÂ∑û"},{value:"shenzhen",label:"Ê∑±Âú≥"}],R=[{value:"desktop",label:"PCÁ´Ø"},{value:"mobile",label:"ÁßªÂä®Á´Ø"},{value:"tablet",label:"Âπ≥Êùø"}],_=[{value:"chrome",label:"Chrome"},{value:"safari",label:"Safari"},{value:"firefox",label:"Firefox"},{value:"edge",label:"Edge"}],$=[{value:"pv",label:"È°µÈù¢ËÆøÈóÆÈáè(PV)"},{value:"uv",label:"Áã¨Á´ãËÆøÂÆ¢(UV)"},{value:"error_rate",label:"ÈîôËØØÁéá"},{value:"load_time",label:"Âä†ËΩΩÊó∂Èó¥"},{value:"bounce_rate",label:"Ë∑≥Âá∫Áéá"},{value:"session_duration",label:"‰ºöËØùÊó∂Èïø"}],{RangePicker:oe}=ee,{Option:Y}=E,{Title:de,Text:h}=Z,{TabPane:y}=F,Ie=()=>{const[m,d]=u.useState(!1),[n,p]=u.useState([]),[c,B]=u.useState({apps:[],dateRange:[C().subtract(7,"day"),C()],dimensions:["pv","uv"],regions:[],devices:[],browsers:[]}),[G,U]=u.useState("trend"),[H,K]=u.useState(!1),J=()=>{const s=[],t=c.apps.length>0?c.apps:[b[0].value,b[1].value],r=O.map(l=>l.value),N=R.map(l=>l.value),a=_.map(l=>l.value);for(let l=0;l<7;l++){const k=C().subtract(l,"day").format("YYYY-MM-DD");t.forEach(z=>{r.forEach(A=>{N.forEach(L=>{a.forEach(D=>{c.dimensions.forEach(M=>{s.push({id:`${z}-${A}-${L}-${D}-${M}-${k}`,app:z,dimension:M,value:Math.floor(Math.random()*1e4)+1e3,timestamp:k,region:A,device:L,browser:D})})})})})})}return s},S=async()=>{d(!0);try{await new Promise(t=>setTimeout(t,1e3));const s=J();p(s)}catch{V.error("Êï∞ÊçÆÂä†ËΩΩÂ§±Ë¥•")}finally{d(!1)}};u.useEffect(()=>{S()},[c]);const v=(s,t)=>{B(r=>({...r,[s]:t}))},Q=()=>{V.success("Êï∞ÊçÆÂØºÂá∫ÊàêÂäü")},W=[{title:"Â∫îÁî®",dataIndex:"app",key:"app",render:s=>{const t=b.find(r=>r.value===s);return e.jsx(re,{color:"blue",children:(t==null?void 0:t.label)||s})}},{title:"Áª¥Â∫¶",dataIndex:"dimension",key:"dimension",render:s=>{const t=$.find(r=>r.value===s);return(t==null?void 0:t.label)||s}},{title:"Êï∞ÂÄº",dataIndex:"value",key:"value",render:s=>s.toLocaleString(),sorter:(s,t)=>s.value-t.value},{title:"Âú∞Âå∫",dataIndex:"region",key:"region",render:s=>{const t=O.find(r=>r.value===s);return(t==null?void 0:t.label)||s}},{title:"ËÆæÂ§á",dataIndex:"device",key:"device",render:s=>{const t=R.find(r=>r.value===s);return(t==null?void 0:t.label)||s}},{title:"ÊµèËßàÂô®",dataIndex:"browser",key:"browser",render:s=>{const t=_.find(r=>r.value===s);return(t==null?void 0:t.label)||s}},{title:"Êó∂Èó¥",dataIndex:"timestamp",key:"timestamp",sorter:(s,t)=>s.timestamp.localeCompare(t.timestamp)}],j=(()=>{const s=n.filter(a=>a.dimension==="pv").reduce((a,l)=>a+l.value,0),t=n.filter(a=>a.dimension==="uv").reduce((a,l)=>a+l.value,0),r=n.filter(a=>a.dimension==="error_rate").reduce((a,l)=>a+l.value,0)/n.filter(a=>a.dimension==="error_rate").length||0,N=n.filter(a=>a.dimension==="load_time").reduce((a,l)=>a+l.value,0)/n.filter(a=>a.dimension==="load_time").length||0;return{totalPV:s,totalUV:t,avgErrorRate:r,avgLoadTime:N}})();return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(de,{level:2,children:"Â§öÁª¥ÂàÜÊûê"}),e.jsx(h,{type:"secondary",children:"ÈÄöËøáÂ§öÁª¥Â∫¶Êï∞ÊçÆÂàÜÊûêÔºåÊ∑±ÂÖ•‰∫ÜËß£Â∫îÁî®ÊÄßËÉΩÂíåÁî®Êà∑Ë°å‰∏∫"}),e.jsxs(o,{style:{marginTop:"16px",marginBottom:"24px"},children:[e.jsxs(g,{gutter:[16,16],align:"middle",children:[e.jsx(i,{span:6,children:e.jsxs(x,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsx(h,{strong:!0,children:"Â∫îÁî®ÈÄâÊã©"}),e.jsx(E,{mode:"multiple",placeholder:"ÈÄâÊã©Â∫îÁî®",style:{width:"100%"},value:c.apps,onChange:s=>v("apps",s),allowClear:!0,children:b.map(s=>e.jsx(Y,{value:s.value,children:s.label},s.value))})]})}),e.jsx(i,{span:6,children:e.jsxs(x,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsx(h,{strong:!0,children:"Êó∂Èó¥ËåÉÂõ¥"}),e.jsx(oe,{value:c.dateRange,onChange:s=>s&&v("dateRange",s),style:{width:"100%"}})]})}),e.jsx(i,{span:6,children:e.jsxs(x,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsx(h,{strong:!0,children:"ÂàÜÊûêÁª¥Â∫¶"}),e.jsx(E,{mode:"multiple",placeholder:"ÈÄâÊã©Áª¥Â∫¶",style:{width:"100%"},value:c.dimensions,onChange:s=>v("dimensions",s),children:$.map(s=>e.jsx(Y,{value:s.value,children:s.label},s.value))})]})}),e.jsx(i,{span:6,children:e.jsxs(x,{children:[e.jsx(w,{type:"primary",icon:e.jsx(ce,{}),onClick:S,children:"Êü•ËØ¢"}),e.jsx(w,{icon:e.jsx(se,{}),onClick:S,children:"Âà∑Êñ∞"}),e.jsx(w,{icon:e.jsx(te,{}),onClick:Q,children:"ÂØºÂá∫"})]})})]}),e.jsx(ae,{}),e.jsxs(g,{gutter:[16,16],children:[e.jsx(i,{span:6,children:e.jsxs(x,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsx(h,{strong:!0,children:"Âú∞Âå∫Á≠õÈÄâ"}),e.jsx(T.Group,{options:O,value:c.regions,onChange:s=>v("regions",s)})]})}),e.jsx(i,{span:6,children:e.jsxs(x,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsx(h,{strong:!0,children:"ËÆæÂ§áÁ±ªÂûã"}),e.jsx(T.Group,{options:R,value:c.devices,onChange:s=>v("devices",s)})]})}),e.jsx(i,{span:6,children:e.jsxs(x,{direction:"vertical",size:"small",style:{width:"100%"},children:[e.jsx(h,{strong:!0,children:"ÊµèËßàÂô®"}),e.jsx(T.Group,{options:_,value:c.browsers,onChange:s=>v("browsers",s)})]})}),e.jsx(i,{span:6,children:e.jsxs(x,{direction:"vertical",size:"small",children:[e.jsx(h,{strong:!0,children:"ÂØπÊØîÊ®°Âºè"}),e.jsxs(I.Group,{value:H,onChange:s=>K(s.target.value),children:[e.jsx(I,{value:!1,children:"ÊôÆÈÄö"}),e.jsx(I,{value:!0,children:"ÂêåÊØî"})]})]})})]})]}),e.jsxs(g,{gutter:[16,16],style:{marginBottom:"24px"},children:[e.jsx(i,{span:6,children:e.jsx(o,{children:e.jsx(f,{title:"ÊÄªÈ°µÈù¢ËÆøÈóÆÈáè",value:j.totalPV,precision:0,valueStyle:{color:"#3f8600"},suffix:"Ê¨°"})})}),e.jsx(i,{span:6,children:e.jsx(o,{children:e.jsx(f,{title:"ÊÄªÁã¨Á´ãËÆøÂÆ¢",value:j.totalUV,precision:0,valueStyle:{color:"#cf1322"},suffix:"‰∫∫"})})}),e.jsx(i,{span:6,children:e.jsx(o,{children:e.jsx(f,{title:"Âπ≥ÂùáÈîôËØØÁéá",value:j.avgErrorRate,precision:2,valueStyle:{color:"#faad14"},suffix:"%"})})}),e.jsx(i,{span:6,children:e.jsx(o,{children:e.jsx(f,{title:"Âπ≥ÂùáÂä†ËΩΩÊó∂Èó¥",value:j.avgLoadTime,precision:0,valueStyle:{color:"#722ed1"},suffix:"ms"})})})]}),e.jsx(X,{spinning:m,children:e.jsxs(F,{activeKey:G,onChange:U,children:[e.jsx(y,{tab:"Ë∂ãÂäøÂõæ",children:e.jsx(o,{children:e.jsx("div",{className:"h-400px flex items-center justify-center border-2 border-dashed border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"üìà"}),e.jsx("div",{className:"text-gray-500",children:"Ë∂ãÂäøÂõæË°®"}),e.jsx("div",{className:"text-gray-400 text-sm",children:"ÂõæË°®Â∫ìÂä†ËΩΩ‰∏≠..."})]})})})},"trend"),e.jsx(y,{tab:"Êü±Áä∂Âõæ",children:e.jsx(o,{children:e.jsx("div",{className:"h-400px flex items-center justify-center border-2 border-dashed border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"üìä"}),e.jsx("div",{className:"text-gray-500",children:"Êü±Áä∂ÂõæË°®"}),e.jsx("div",{className:"text-gray-400 text-sm",children:"ÂõæË°®Â∫ìÂä†ËΩΩ‰∏≠..."})]})})})},"bar"),e.jsx(y,{tab:"ÂàÜÂ∏ÉÂõæ",children:e.jsxs(g,{gutter:16,children:[e.jsx(i,{span:12,children:e.jsx(o,{title:"Â∫îÁî®ÂàÜÂ∏É",children:e.jsx("div",{className:"h-300px flex items-center justify-center border-2 border-dashed border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"ü•ß"}),e.jsx("div",{className:"text-gray-500",children:"Â∫îÁî®ÂàÜÂ∏ÉÂõæ"}),e.jsx("div",{className:"text-gray-400 text-sm",children:"ÂõæË°®Â∫ìÂä†ËΩΩ‰∏≠..."})]})})})}),e.jsx(i,{span:12,children:e.jsx(o,{title:"Âú∞Âå∫ÂàÜÂ∏É",children:e.jsx("div",{className:"h-300px flex items-center justify-center border-2 border-dashed border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"üåç"}),e.jsx("div",{className:"text-gray-500",children:"Âú∞Âå∫ÂàÜÂ∏ÉÂõæ"}),e.jsx("div",{className:"text-gray-400 text-sm",children:"ÂõæË°®Â∫ìÂä†ËΩΩ‰∏≠..."})]})})})})]})},"pie"),e.jsx(y,{tab:"Êï∞ÊçÆÊòéÁªÜ",children:e.jsx(o,{children:e.jsx(le,{columns:W,dataSource:n,rowKey:"id",pagination:{total:n.length,pageSize:20,showSizeChanger:!0,showQuickJumper:!0,showTotal:s=>`ÂÖ± ${s} Êù°ËÆ∞ÂΩï`},scroll:{x:1200}})})},"detail")]})})]})};export{Ie as default};
