import{c as k,u as v,r as o,j as e,B as a,b as C,S as c,s as d,M as T}from"./index-C6T66UYw.js";import{a as R,b as K}from"./mock-CsnfvyZD.js";import{C as m,T as S}from"./index-MJq_1bjb.js";import{D as t}from"./index-Dekj6dpf.js";import{T as r}from"./index-BWL1JphO.js";import{F as $}from"./Table-rx-uFvO4.js";import{R as A}from"./ArrowLeftOutlined-D6KmWXY3.js";import{R as D}from"./EditOutlined-9U3olPbu.js";import{R as M}from"./DeleteOutlined-CETmvlP7.js";import"./index-gul_2otK.js";import"./Pagination-B3rYXXPg.js";import"./EditOutlined-DdmGLkPL.js";import"./DeleteOutlined-DFutYCzo.js";const J=()=>{const{id:p}=k(),n=v(),[s,x]=o.useState(null),[j,u]=o.useState([]),[l,h]=o.useState(!0);o.useEffect(()=>{x(R),u(K),h(!1)},[p]);const f=()=>{d.info("跳转到编辑页面")},b=()=>{T.confirm({title:"删除应用",content:"确定要删除这个应用吗？删除后不可恢复。",okText:"确定",cancelText:"取消",onOk:()=>{d.success("删除成功"),n("/apps")}})},g=()=>{n(`/configs?appKey=${s==null?void 0:s.appKey}`)},y=[{title:"版本",dataIndex:"version",key:"version"},{title:"状态",dataIndex:"status",key:"status",render:i=>e.jsx(r,{color:i==="active"?"green":"default",children:i==="active"?"当前版本":"历史版本"})},{title:"更新时间",dataIndex:"updateTime",key:"updateTime"},{title:"更新人",dataIndex:"updateUser",key:"updateUser"},{title:"操作",key:"action",render:i=>e.jsxs(c,{children:[e.jsx(a,{size:"small",onClick:()=>n(`/configs/${i.id}`),children:"查看配置"}),i.status==="inactive"&&e.jsx(a,{size:"small",type:"primary",children:"回滚到此版本"})]})}];if(l||!s)return e.jsx(m,{loading:l});const I=[{key:"basic",label:"基本信息",children:e.jsxs(t,{column:2,bordered:!0,children:[e.jsx(t.Item,{label:"应用名称",children:s.name}),e.jsx(t.Item,{label:"AppKey",children:e.jsx("code",{children:s.appKey})}),e.jsx(t.Item,{label:"负责人",children:s.owner}),e.jsx(t.Item,{label:"状态",children:e.jsx(r,{color:s.status==="active"?"green":"red",children:s.status==="active"?"启用":"禁用"})}),e.jsx(t.Item,{label:"分组",children:s.group}),e.jsx(t.Item,{label:"标签",children:s.tags.map(i=>e.jsx(r,{color:"blue",children:i},i))}),e.jsx(t.Item,{label:"创建时间",children:s.createTime}),e.jsx(t.Item,{label:"更新时间",children:s.updateTime}),e.jsx(t.Item,{label:"描述",span:2,children:s.description})]})},{key:"monitor",label:"监控配置",children:e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(a,{type:"primary",icon:e.jsx(C,{}),onClick:g,children:"配置监控"})}),e.jsx($,{columns:y,dataSource:j,rowKey:"id",pagination:!1})]})}];return e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(c,{children:[e.jsx(a,{icon:e.jsx(A,{}),onClick:()=>n("/apps"),children:"返回列表"}),e.jsx(a,{icon:e.jsx(D,{}),onClick:f,children:"编辑"}),e.jsx(a,{danger:!0,icon:e.jsx(M,{}),onClick:b,children:"删除"})]})}),e.jsx(m,{title:`应用详情 - ${s.name}`,children:e.jsx(S,{items:I,defaultActiveKey:"basic"})})]})};export{J as default};
